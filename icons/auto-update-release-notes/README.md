## @actions-internal/auto-update-icons-release-notes

Экшен для автоматического обновления примечаний к релизу в репозитории [VKCOM/icons](https://github.com/VKCOM/icons)

### Назначение

Автоматическое обновление информации в релизных заметках при добавлении или изменении иконок. Позволяет отображать в релизах:
- Добавленные иконки
- Изменённые иконки

### Входные параметры

- `token` — токен доступа к репозиторию с правами на изменение релизов
- `pull_request_number` — номер пул-реквеста, сливаемого в ветку `master`
- `current_icons_version` — текущая версия пакета `@vkontakte/icons` (для вычисления следующей минорной версии)

### Принцип работы

1. Активируется при слиянии пул-реквеста в `master`
2. Анализируются изменённые файлы для выявления:
    - Добавленных иконок
    - Изменённых иконок
3. Если изменения не обнаружены — процесс завершается
4. Если изменения найдены:
    - Определяется следующая минорная версия (на основе `current_icons_version`)
    - Находится черновик релиза с названием `@vkontakte/icons@v{следующая_версия}`
    - При отсутствии релиза — создаётся новый
5. В тело релиза добавляются блоки "Добавленные иконки" и "Изменённые иконки":
    - Существующее содержимое релиза сохраняется
    - Иконки сортируются по размеру и алфавиту

### Формат релизных заметок

Пример формата, используемого экшеном:

```markdown
## Добавленные иконки

### add_circle_fill_red_16

![add_circle_fill_red_16](https://raw.githubusercontent.com/your-org/your-repo/commit-sha/packages/icons/src/svg/16/add_circle_fill_red_16.svg)

### bug_outline_16

![bug_outline_16](https://raw.githubusercontent.com/your-org/your-repo/commit-sha/packages/icons/src/svg/16/bug_outline_16.svg)

## Измененные иконки

### add_rectangle_line_16

![add_rectangle_line_16](https://raw.githubusercontent.com/your-org/your-repo/commit-sha/packages/icons/src/svg/16/add_rectangle_line_16.svg)
```

### Возможные улучшения

1. Рефакторинг логики создания релизов:
    - Текущая реализация всегда создаёт минорный релиз
    - В будущем может потребоваться гибкая стратегия версионирования
2. Добавление отслеживания удалённых иконок:
    - Сейчас функционал отсутствует
    - Требует изменения стратегии версионирования (мажорные релизы для удалений)